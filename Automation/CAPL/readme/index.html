<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="chaitu-ycr" /><link rel="canonical" href="https://chaitu-ycr.github.io/automotive_test_automation/Automation/CAPL/readme/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>CAPL - automotive_test_automation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../assets/_mkdocstrings.css" rel="stylesheet" />
        <link href="../../../_assets/extra.css" rel="stylesheet" />
        <link href="../../../assets/mkdocs_puml/puml.css" rel="stylesheet" />
        <link href="../../../assets/mkdocs_puml/interaction.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "CAPL";
        var mkdocs_page_input_path = "Automation\\CAPL\\readme.md";
        var mkdocs_page_url = "/automotive_test_automation/Automation/CAPL/readme/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> automotive_test_automation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Notebooks</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" >Testing</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" >Testing</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../Testing/readme/">Basics</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" >References</a>
    <ul>
                <li class="toctree-l4"><a class="" href="https://www.istqb.org/wp-content/uploads/2024/11/ISTQB_CTFL_Syllabus_v4.0.1.pdf">ISTQB_CTFL_Syllabus_v4.0.1</a>
                </li>
                <li class="toctree-l4"><a class="" href="https://www.istqb.org/wp-content/uploads/2024/11/ISTQB-CT-AuT_Syllabus_v1.0_2018.pdf">ISTQB-CT-AuT_Syllabus_v1.0_2018</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >ASPICE</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../Testing/ASPICE/readme/">Basics</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" >References</a>
    <ul>
                <li class="toctree-l4"><a class="" href="https://vda-qmc.de/wp-content/uploads/2023/12/Automotive-SPICE-PAM-v40.pdf">Automotive-SPICE-PAM-v40</a>
                </li>
                <li class="toctree-l4"><a class="" href="https://www.ul.com/sites/default/files/2024-10/Automotive_Spice_Pocket_Guide.pdf">Automotive_Spice_Pocket_Guide</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >SDLC</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" >Basics</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../../Testing/SDLC/readme/">Readme</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Tools</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../Tools/CANoe/readme/">CANoe</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Tools/CANalyzer/readme/">CANalyzer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Vector_VN_HW</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../Tools/Vector_VN_HW/vn_hw_io_piggy/">how to use VN HW IO piggy in automotive testing</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Protocols</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../Protocols/CAN/readme/">CAN</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Protocols/UDS/readme/">UDS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Protocols/DoIP/readme/">DoIP</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Automation</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="#">CAPL</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Python</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../Python/readme/">Python Introduction</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Basics</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/000_introduction/">introduction - continution</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/001_if_elif_else/">if elif else</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/002_match_case/">match case</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/003_loops/">loops</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/004_string/">string</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/005_list/">list</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/006_tuple/">tuple</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/007_set/">set</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/008_dictionary/">dictionary</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/009_array/">array</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/010_functions/">functions</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/011_oop/">oop</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/012_error_exception_handling/">error and exception handling</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/013_iterator/">iterator</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/014_generator/">generator</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/015_decorator/">decorator</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Basics/016_documentation/">documentation</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Usecases</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Usecases/cantools/">cantools</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Usecases/dash/">What is Python Dash?</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Usecases/multiprocessing/">Multiprocessing</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Usecases/multithreading/">Multithreading</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Usecases/opencv/">Opencv</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Usecases/pandas/">Pandas</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Usecases/pillow/">Pillow</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Usecases/poetry/">Poetry</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Usecases/pytest/">Pytest</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Usecases/regular_expressions/">Regular expressions</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Usecases/tkinter/">Tkinter</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Usecases/programming_challenges/">Python Programming Challenges</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Usecases/z_mixed_examples/">list of python examples</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >QA</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/QA/python_basics_questions/">questions on python basics</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Cheatsheets</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Python/Cheatsheets/python_basics_cheatsheet.pdf">Basics</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Test Environments</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../Test_Env/HiL/readme/">HiL</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Test_Env/SiL/readme/">SiL</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Test_Env/Bench/readme/">Bench</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Projects</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../Projects/ADAS/readme/">ADAS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Projects/BMS/readme/">BMS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Projects/IPC/readme/">IPC</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Projects/ABS/readme/">ABS</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Miscellaneous</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" >YAML</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../Miscellaneous/YAML/readme/">Introduction</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../Miscellaneous/YAML/scalars/">Scalars</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../Miscellaneous/YAML/sequences/">Sequences (Lists) 📋</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../Miscellaneous/YAML/mappings/">Mappings (Dictionaries) 📑</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../Miscellaneous/YAML/syntax_and_structure/">Syntax and Structure 🧩</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../Miscellaneous/YAML/miscellaneous/">Miscellaneous</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Miscellaneous/GIT/readme/">GIT</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Miscellaneous/Github_Actions/readme/">Github_Actions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Miscellaneous/Jenkins/readme/">Jenkins</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Miscellaneous/CMake/readme/">CMake</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Miscellaneous/PlantUML/readme/">PlantUML</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">automotive_test_automation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Notebooks</li>
          <li class="breadcrumb-item">Automation</li>
      <li class="breadcrumb-item active">CAPL</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/chaitu-ycr/automotive_test_automation/blob/main/docs/Automation/CAPL/readme.md">Edit</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="introduction">Introduction</h2>
<ul>
<li>Communication Access Programming Language (CAPL) allows programming of network node models as well as special evaluation programs for individual applications.</li>
<li>The functional range of CANoe includes a CAPL compiler which compiles a created CAPL file with the extension <em>.CAN to an executable program file with the extension </em>.CBF.</li>
<li>CAPL programs can be used to analyze/simulate network data.</li>
<li>CAPL program can be used to simulate the rest of the network.</li>
<li>CAPL program can be used to automate test cases.</li>
</ul>
<h2 id="prerequisites-for-capl-programming">Prerequisites for CAPL programming</h2>
<ul>
<li>Knowledge of Vector CANoe tool.</li>
<li>Basic knowledge of the C programming language.</li>
<li>Knowledge of database and bus protocols(minimum CAN).</li>
<li>Windows PC with minimum 8GB RAM.</li>
<li>Vector CANoe version (&gt;= 11.0) installed. At Least demo version.</li>
<li>Download latest Vector CANoe demo version from here → <a href="https://www.vector.com/int/en/download/canoe-demo-17-windows/">Download | Vector</a></li>
</ul>
<h2 id="program-block"><strong>Program Block</strong></h2>
<table>
<thead>
<tr>
<th></th>
<th>SIMULATION</th>
<th>ANALYSIS</th>
</tr>
</thead>
<tbody>
<tr>
<td>CANoe</td>
<td><img alt="canoe_simulation" src="../canoe_capl_demo_cfg/doc_images/canoe_simulation.png" /></td>
<td><img alt="canoe_analysis" src="../canoe_capl_demo_cfg/doc_images/canoe_analysis.png" /></td>
</tr>
<tr>
<td>CANalyzer</td>
<td><img alt="canalyzer_simulation" src="../canoe_capl_demo_cfg/doc_images/canalyzer_simulation.png" /></td>
<td><img alt="canalyzer_analysis" src="../canoe_capl_demo_cfg/doc_images/canalyzer_analysis.png" /></td>
</tr>
</tbody>
</table>
<h2 id="programming-environment">Programming Environment</h2>
<table>
<thead>
<tr>
<th>CANoe</th>
<th><img alt="canoe_capl_programming_env" src="../canoe_capl_demo_cfg/doc_images/canoe_capl_programming_env.png" /></th>
</tr>
</thead>
<tbody>
<tr>
<td>CANalyzer</td>
<td><img alt="canalyzer_capl_programming_env" src="../canoe_capl_demo_cfg/doc_images/canalyzer_capl_programming_env.png" /></td>
</tr>
</tbody>
</table>
<h2 id="variables">Variables</h2>
<h3 id="scalar-data-types">Scalar Data Types</h3>
<h4 id="integers">Integers</h4>
<pre><code class="language-c">// byte (unsigned, 1 Byte)
byte day;

// word (unsigned, 2 Byte)
word month;

// dword (unsigned, 4 Byte)
dword year;

// int (signed, 2 Byte)
int angle;

// long (signed, 4 Byte)
long profit_in_bucks;

// int64 (signed, 8 Byte)
int64 ticks;

// qword (unsigned, 8 Byte)
qword timestamp;
</code></pre>
<h4 id="individual-character">Individual character</h4>
<pre><code class="language-c">// char (1 Byte)
char key_pressed;
</code></pre>
<h4 id="floating-point-numbers">Floating point numbers</h4>
<pre><code class="language-c">// float (8 Byte)
float pi_value = 3.14;

// double (8 Byte)
double stock_value = 5.123456;
</code></pre>
<h3 id="self-defined-structuresstruct">Self Defined Structures(struct)</h3>
<pre><code class="language-c">variables
{
    struct PairStructType { int first; int second } pair;
    struct PairStructType pair2;
}
on start
{
    pair.first = 1;
    pair.second = 2;
}
</code></pre>
<h3 id="enumeration-typesenum">Enumeration Types(enum)</h3>
<p>Enumeration types are defined in CAPL in exactly the same way as in C:
enum Colors { Red, Green, Blue };
Element names must be unique throughout the CAPL program.</p>
<h3 id="associative-fields">Associative Fields</h3>
<p>With associative fields (so-called maps) you can perform a 1:1 assignment of values to other values without using excessive memory. The elements of an associative field are key value pairs, whereby there is fast access to a value via a key.
An associative field is declared in a similar way to a normal field but the data type of the key is written in square brackets:</p>
<pre><code class="language-c">int m[float];         // maps float to int
float x[int64];       // maps int64 to float
char[30] s[ char[] ]  // maps string (of unspecified length) to string of length &lt; 30
</code></pre>
<p>Data types for the keys can be long, int64, float, double, enumeration types and char[]. As data type for values are simple data types, enumeration types fields and structure types allowed. You cannot use associative fields themselves as the value type of an associative field.</p>
<h3 id="objects">Objects</h3>
<ul>
<li>message and multiplexed_message</li>
<li>signal</li>
<li>sysVar, sysVarInt, sysVarFloat, sysVarString, sysVarIntArray, sysVarFloatArray, sysVarData</li>
<li>timer and msTimer</li>
<li>diagRequest</li>
<li>diagResponse</li>
</ul>
<h3 id="global-variables">Global Variables</h3>
<ul>
<li>global variables are declared in the Variables section.</li>
<li>The data types DWORD, LONG, WORD, INT, BYTE and CHAR can be used analogously to their use in the C programming language.</li>
<li>The data types FLOAT and DOUBLE are synonyms and designate 64 bit floating point numbers conforming to the IEEE standard.</li>
<li>A timer is created with a timer. The timer does not begin to run until it has been started in a on timer event procedure. After the timer has elapsed the associated event procedure is called. A variable of the type timer can only be accessed by the predefined functions setTimer and cancelTimer.</li>
<li>CAN messages to be output by the CAPL program are declared with a message.</li>
<li>Variables can be initialized in their declarations. Both simplified notation and bracketing with { } are permitted. The compiler initializes all variables, with the exception of timers, with default values (automatic default: 0).</li>
</ul>
<h3 id="local-variables">Local Variables</h3>
<ul>
<li>Local variables are always created statically in CAPL (in contrast to C).</li>
<li>This means that an initialization is only executed at the program start, and when variables enter the procedure they assume the value they had when they last left the procedure.</li>
</ul>
<pre><code class="language-c">variables
{
    int j, k = 2;
    double f = 17.5;
    msTimer tmr;
    message 100 msg;
    int array_var[2] = [1, 2];
    char name[12] = &quot;hello world&quot;;
    int array_matrix[2][2] = {{1, 2}, {3, 4}};
}
</code></pre>
<h2 id="system-events">System Events</h2>
<h3 id="on-prestart">on preStart</h3>
<ul>
<li>Initialization of measurement (before start)</li>
<li>The on preStart procedure is only used to initialize variables, to display messages in the Write Window and to read in data from files.</li>
<li>At the moment the on preStart procedure is executed, not all possibilities of the system (CANoe) are available.</li>
<li>It is not possible for example to send messages on the bus with the output function.</li>
</ul>
<pre><code class="language-c">on preStart
{
    write(&quot;hello from prestart&quot;);
}
</code></pre>
<h3 id="on-start">on start</h3>
<ul>
<li>Program start</li>
</ul>
<pre><code class="language-c">on start
{
    write(&quot;hello from start&quot;);
}
</code></pre>
<h3 id="on-prestop">on preStop</h3>
<ul>
<li>Measurement stop has been requested</li>
<li>The on preStop handler is called after a measurement stop has been requested.</li>
<li>The on preStop function can be used to carry out some final actions that must be done before the measurement stop actually takes effect.</li>
</ul>
<pre><code class="language-c">on preStop
{
    write(&quot;hello from preStop&quot;);
}
</code></pre>
<h3 id="on-stopmeasurement">on stopMeasurement</h3>
<ul>
<li>End of measurement</li>
</ul>
<pre><code class="language-c">on stopMeasurement
{
    write(&quot;hello from stopMeasurement&quot;);
}
</code></pre>
<h3 id="on-timer">on timer</h3>
<ul>
<li>You can define time events in CAPL. When this event occurs, i.e. when a certain period of time elapses, the associated on timer procedure is called. You can program cyclic program sequences by resetting the same time event within the on timer procedure.</li>
<li>The timer variable can be accessed with the keyword this within the event procedure.</li>
<li>You would start a previously-defined timer with the function setTimer.</li>
<li>After the timer has elapsed, the associated on timer procedure is called. The maximum time is 2147483647 s (=596523.23h) for variables of the type timer and 2147483647 ms (= 2147483,647 s = 596,52h) for variables of the type msTimer. With the function cancelTimer you can stop a timer which has already been started and thereby prevent the associated on timer procedure from being called.</li>
<li>In CAPL has the following type of timer's:</li>
<li>timer - timer based on seconds</li>
<li>msTimer - timer based on milliseconds</li>
</ul>
<pre><code class="language-c">variables
{
    msTimer tmr;
    message 100 msg;
}

on key 'a'
{
    setTimer(tmr, 1000);
}

on timer tmr
{
    output(msg);
}
</code></pre>
<h3 id="on-key">on key</h3>
<ul>
<li>With on key procedure you can execute defined actions with a key press.</li>
</ul>
<table>
<thead>
<tr>
<th>Keystroke</th>
<th>Event Procedure</th>
<th>Occurs When</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td>on key 'a'</td>
<td>lower case "a" key is pressed</td>
</tr>
<tr>
<td>A</td>
<td>on key 'A'</td>
<td>upper case "A" key is pressed</td>
</tr>
<tr>
<td>A</td>
<td>on key 0x41</td>
<td>upper case "A" key is pressed</td>
</tr>
<tr>
<td>2</td>
<td>on key '2'</td>
<td>number "2" is pressed</td>
</tr>
<tr>
<td>$</td>
<td>on key '\$'</td>
<td>"\$" key is pressed</td>
</tr>
<tr>
<td>End</td>
<td>on key End</td>
<td>key "End" is pressed</td>
</tr>
<tr>
<td>Control + PageDown</td>
<td>on key ctrlPageDown</td>
<td>key "Control + Page Down" keys pressed</td>
</tr>
<tr>
<td>any key</td>
<td>on key *</td>
<td>any key pressed other than already defined key events</td>
</tr>
</tbody>
</table>
<pre><code class="language-c">on key 'a'
{
    message 100 msg;
    output(msg);
}
</code></pre>
<h2 id="value-objects">Value Objects</h2>
<h3 id="on-signal">on signal</h3>
<ul>
<li>called as soon as a signal changes.</li>
</ul>
<pre><code class="language-c">on signal LightSwitch::OnOff
{
    v1 = this.raw;
    v2 = $LightSwitch::OnOff.raw
}
</code></pre>
<h3 id="on-signal_update">on signal_update</h3>
<ul>
<li>called with every signal reception.</li>
</ul>
<h3 id="on-sysvar">on sysvar</h3>
<ul>
<li>The event procedure type on sysVar is provided to react to value changes of system variables in CANoe.</li>
<li>In contrast to messages, system variables are not blocked by CAPL nodes in a data flow branch of the measurement configuration.</li>
<li>Therefore, when there are two CAPL nodes in series, both react to the same system variable with the event procedure on sysVar.</li>
</ul>
<pre><code class="language-c">on sysvar_update dummy::sys_var_1
{
  if(@this == 1)
  {
    output(msg_es);
  }
}
</code></pre>
<h3 id="on-sysvar_update">on sysvar_update</h3>
<ul>
<li>called with every system variable reception</li>
</ul>
<h2 id="can-events">CAN events</h2>
<h3 id="on-message">on message</h3>
<ul>
<li>The event procedure on message is called on the receipt of a valid CAN message.</li>
</ul>
<table>
<thead>
<tr>
<th>message event</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>on message 123</td>
<td>event triggered if message id 123 (decimal, standard identifier) received regardles of receiving chip</td>
</tr>
<tr>
<td>on message 123x</td>
<td>event triggered if message id 123 (decimal, extended identifier) received regardles of receiving chip</td>
</tr>
<tr>
<td>on message 0x123</td>
<td>event triggered if message id 123 (hexadecimal, standard identifier) received regardles of receiving chip</td>
</tr>
<tr>
<td>on message 0x123x</td>
<td>event triggered if message id 123 (hexadecimal, extended identifier) received regardles of receiving chip</td>
</tr>
<tr>
<td>on message EngineData</td>
<td>event triggered if message EngineData received regardles of receiving chip</td>
</tr>
<tr>
<td>on message CAN1.123</td>
<td>event triggered if message id 123 (decimal, standard identifier) received on CAN1</td>
</tr>
<tr>
<td>on message *</td>
<td>event triggered for all messages other than the defined message events in the same node</td>
</tr>
<tr>
<td>on message CAN2.*</td>
<td>event triggered for all messages other than the defined message events in the same node on CAN2</td>
</tr>
<tr>
<td>on message CAN2.[*]</td>
<td>event triggered for all messages on CAN2</td>
</tr>
<tr>
<td>on message 50, 60, 100-200</td>
<td>event triggered for messages 50, 60, and 100 to 200</td>
</tr>
</tbody>
</table>
<h2 id="user-defined-functions">user defined functions</h2>
<pre><code class="language-c">void dummy_user_func()
{
    int var_1 = 10;
    write(&quot;hello from user function. valr_1 = %d&quot;, var_1)
}
</code></pre>
<pre><code class="language-c">void dummy_user_func_with_params(int var_1)
{
    write(&quot;hello from user function. valr_1 = %d&quot;, var_1)
}
</code></pre>
<pre><code class="language-c">int dummy_user_func_with_params_and_return(int var_1)
{
    write(&quot;hello from user function. valr_1 = %d&quot;, var_1)
    return var_1*10
}
</code></pre>
<h2 id="this-keyword">"this" keyword</h2>
<ul>
<li>Within an event procedure for receiving a CAN object or an environment variable, the data structure of the object is designated by the keyword <strong>this</strong>.</li>
<li>The only event procedures that can use the <strong>this</strong> keyword are</li>
</ul>
<pre><code class="language-c">on message
on envVar
on key
on errorframe   // only to get the CAN channel number
on busOff
on errorPassive
on errorActive
on warningLimit
</code></pre>
<p>For example, you could access the first data byte of message 100 which was just received by means of the following</p>
<pre><code class="language-c">on message 100
{
    byte byte_0;
    byte_0 = this.byte(0);
    write(&quot;byte 0 value = %d&quot;, byte_0);
}
</code></pre>
<p>Analogously, you could read the new value of the integer environment variable Switch which has just been changed by means of the following</p>
<pre><code class="language-c">on envVar Switch
{
    int val;
    val = getValue(this);
}
</code></pre>
<h2 id="control-logging-block-using-capl">Control logging block using CAPL</h2>
<p>The startLogging() and stopLogging() functions can be used to start and stop logging.</p>
<pre><code class="language-c">on key 'x'
{
    startLogging();
    write(&quot;Started Logging...&quot;);
}
</code></pre>
<pre><code class="language-c">on key 'y'
{
    stopLogging();
    write(&quot;Stopped Logging...&quot;);
}
</code></pre>
<h2 id="using-capl-for-testing">Using CAPL for testing</h2>
<p><img alt="canoe_test_env" src="../canoe_capl_demo_cfg/doc_images/canoe_test_env.png" />
<img alt="test_module" src="../canoe_capl_demo_cfg/doc_images/test_module.png" />
<img alt="test_setup" src="../canoe_capl_demo_cfg/doc_images/test_setup.png" /></p>
<h3 id="test-setup">Test Setup</h3>
<ul>
<li>The user-defined test setup is displayed graphically in this window.</li>
<li>All options to parameterize the test environments are selected in this window.</li>
</ul>
<h3 id="test-environment">Test Environment</h3>
<ul>
<li>All test environments are shown in a tree view in this window and can be configured there. Each root folder represents an independent test environment file. In CANoe there is exactly one Test Setup for Test Modules window in which several test environments can be loaded. A test environment consists of any directory structure that enables the grouping of test blocks.</li>
<li>This window can be used to carry out the full range of actions, such as loading and saving, as well as creating new test environments. Right-click on the free window space and select the desired action from the context menu.</li>
<li>Similarly, you can use the context menu of each respective object to carry out operations on individual test environments, folders or nodes in the test setup.</li>
<li>Each test environment is stored in an individual file (*.TSE – Test Setup Environment) and can thus be loaded or unloaded independently of the CANoe configuration (simulation and analysis window).</li>
</ul>
<h3 id="test-module">Test Module</h3>
<ul>
<li>A test module contains a set of test cases that are executed sequentially by the test execution of CANoe or by its internal control program. Execution of a test module generates a test report.</li>
</ul>
<h3 id="test-case">Test Case</h3>
<ul>
<li>In a test case, a specific property of a system/unit (SUT) to be tested is tested. A test case has a clearly defined test task and returns a clear test result in the form of a verdict when it is executed.</li>
<li>Test cases are only available if a test node linked in CANoe is concerned.</li>
</ul>
<h3 id="test-report">Test Report</h3>
<ul>
<li>The results from execution of a test module are recorded in a test report. A test report consists primarily of certain administrative information (such as the name of the test module, date of execution, etc.), information on the test cases executed and the results of the test. CANoe creates XML and HTML files to store test reports.
  <img alt="img" src="../canoe_capl_demo_cfg/doc_images/capl_test_script.png" /></li>
</ul>
<h2 id="examples-based-on-use-cases"><strong>Examples based on use cases</strong></h2>
<h3 id="how-to-send-a-message-manually-using-a-keyboard"><strong><a href="../canoe_capl_demo_cfg/examples/program_01.can">How to send a message manually using a keyboard ?</a></strong></h3>
<p><img alt="send a message manually using a keyboard" src="../canoe_capl_demo_cfg/examples/program_01.png" /></p>
<h3 id="how-to-send-a-message-periodically"><strong><a href="../canoe_capl_demo_cfg/examples/program_02.can">How to send a message periodically ?</a></strong></h3>
<p><img alt="program_02" src="../canoe_capl_demo_cfg/examples/program_02.png" /></p>
<h3 id="how-to-send-a-message-based-on-a-system-event"><strong><a href="../canoe_capl_demo_cfg/examples/program_03.can">How to send a message based on a system event ?</a></strong></h3>
<p><img alt="program_03" src="../canoe_capl_demo_cfg/examples/program_03.png" /></p>
<h3 id="how-to-act-and-react-based-on-the-graphic-panel-inputs"><strong><a href="../canoe_capl_demo_cfg/examples/program_04.can">How to act and react based on the graphic panel inputs ?</a></strong></h3>
<p><img alt="program_04" src="../canoe_capl_demo_cfg/examples/program_04.png" /></p>
<h3 id="how-to-create-a-test-case-to-check-if-a-signal-value-is-valid"><strong><a href="../canoe_capl_demo_cfg/examples/program_05.can">How to create a test case to check if a signal value is valid ?</a></strong></h3>
<p><img alt="program_05" src="../canoe_capl_demo_cfg/examples/program_05.png" /></p>
<h3 id="how-to-send-a-diagnostic-message"><strong><a href="../canoe_capl_demo_cfg/examples/program_06.can">How to send a diagnostic message ?</a></strong></h3>
<p><img alt="program_06" src="../canoe_capl_demo_cfg/examples/program_06.png" /></p>
<h3 id="how-to-validate-diagnostic-messages"><strong><a href="../canoe_capl_demo_cfg/examples/program_07.can">How to validate diagnostic messages ?</a></strong></h3>
<p><img alt="program_07" src="../canoe_capl_demo_cfg/examples/program_07.png" /></p>
<h3 id="how-to-capture-a-graphic-window-screenshot-and-insert-it-in-a-report"><strong><a href="../canoe_capl_demo_cfg/examples/program_08.can">How to capture a graphic window screenshot and insert it in a report ?</a></strong></h3>
<p><img alt="program_08" src="../canoe_capl_demo_cfg/examples/program_08.png" /></p>
<h3 id="how-to-execute-windows-programs-from-a-capl-program"><strong><a href="../canoe_capl_demo_cfg/examples/program_09.can">How to execute windows programs from a CAPL program ?</a></strong></h3>
<p><img alt="program_09" src="../canoe_capl_demo_cfg/examples/program_09.png" /></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../../Protocols/DoIP/readme/" class="btn btn-neutral float-left" title="DoIP"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../Python/readme/" class="btn btn-neutral float-right" title="Python Introduction">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../../Protocols/DoIP/readme/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../Python/readme/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../assets/mkdocs_puml/puml.js"></script>
      <script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
      <script src="../../../assets/mkdocs_puml/interaction.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
